<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="mb-2">
        <div class="card mb-4 mb-xl-0">
            <div class="card-header text-center ">Foto de Portada</div>
            <div class="card-body text-center">
                <img id="profileImage"
                     class="img-account-profile w-100"
                     src="{% if school.profile_photo %}
                                      {{ school.profile_photo.url }}
                                  {% else %}
                                      http://bootdey.com/img/Content/avatar/avatar1.png
                                  {% endif %}"
                     alt="Perfil"
                     style="height:250px; object-fit:fill; border-radius:0;">

                <div class="small font-italic text-muted mb-4"></div>
                <input type="file" id="imageUpload" name="profile_photo" accept="image/*"
                       style="display:none;">

                <div class="d-flex justify-content-end">
                    <button class="btn btn-primary" type="button"
                            onclick="document.getElementById('imageUpload').click();">
                        Subir nueva imagen
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xl-4">
            <div class="card mb-4 mb-xl-0">
                <div class="card-header text-center">Logo</div>
                <div class="card-body text-center">
                    <img id="logoImage" class="img-account-profile rounded-circle mb-2"
                         src="{% if school.logo %}{{ school.logo.url }}{% else %}
                             http://bootdey.com/img/Content/avatar/avatar1.png{% endif %}"
                         alt="Perfil" style="width:150px; height:150px; object-fit:cover;">

                    <div class="small font-italic text-muted mb-4">JPG o PNG no mayor a 5 MB</div>

                    <input type="file" id="imageUploadLogo" name="logo" accept="image/*"
                           style="display:none;">

                    <button class="btn btn-primary" type="button"
                            onclick="document.getElementById('imageUploadLogo').click();">
                        Subir nueva imagen
                    </button>
                </div>
            </div>
        </div>

        <div class="col-xl-8">
            <div class="card mb-2">
                <div class="card-header">Detalles de la escuela</div>
                <div class="card-body">
                    <div class="row gx-3 mb-3">
                        <div class="mt-1">
                            <label class="small mb-1">Nombre</label>
                            <input class="form-control" type="text" name="name"
                                   value="{{ school.name }}">
                        </div>
                        <div class="mt-1">
                            <label class="small mb-1">Dirección</label>
                            <input class="form-control" type="text" name="address"
                                   value="{{ school.address|default_if_none:"" }}" id="id_address">
                        </div>

                        <div class="mt-1">
                            <div id="map" class="mt-2" style="height:400px;width:100%;"></div>
                            <input type="hidden" id="id_latitude" name="latitude" value="{{ school.latitude }}">
                            <input type="hidden" id="id_longitude" name="longitude" value="{{ school.longitude }}">
                        </div>

                        <div class="mt-1">
                            <label class="small mb-1">Número de teléfono</label>
                            <input class="form-control"
                                   type="tel"
                                   name="phone_number"
                                   value="{{ school.phone_number|default_if_none:"" }}"
                                   placeholder="+54 3492 526598"
                                   pattern="^\+54[0-9]{8,12}$"
                                   title="Ingrese un número válido en formato internacional, por ejemplo +543492526598"
                                   maxlength="13">
                        </div>
                        <div class="mt-1">
                            <label class="small mb-1">Descripción general</label>
                            <textarea rows="4" class="form-control" type="text"
                                      name="general_description">{{ school.general_description|default_if_none:"" }}</textarea>
                        </div>
                        <div class="mt-1">
                            <label class="small mb-1">Descripción de ingreso</label>
                            <textarea rows="4" class="form-control"
                                      name="income_description">{{ school.income_description|default_if_none:"" }}</textarea>
                        </div>
                        <div class="mt-1 mb-3">
                            <label class="small" for="shifts">Turno/s</label>
                            <select class="form-control select2-shifts" name="shifts" id="shifts" multiple>
                                <option value="Mañana" {% if "Mañana" in school.shifts %}selected{% endif %}>
                                    Mañana
                                </option>
                                <option value="Tarde" {% if "Tarde" in school.shifts %}selected{% endif %}>
                                    Tarde
                                </option>
                                <option value="Noche" {% if "Noche" in school.shifts %}selected{% endif %}>
                                    Noche
                                </option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary float-end" type="submit">Guardar cambios</button>
                </div>
            </div>
        </div>
    </div>
</form>